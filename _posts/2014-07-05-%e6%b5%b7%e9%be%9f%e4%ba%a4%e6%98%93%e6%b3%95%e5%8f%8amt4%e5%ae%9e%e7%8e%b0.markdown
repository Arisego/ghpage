---
layout: post
status: publish
published: true
title: 海龟交易法及MT4实现
author:
 display_name: chaoshikari
 login: chaoshikari
 email: chaoshikari@gmail.com
 url: http://blog.ch-wind.com
author_login: chaoshikari
author_email: chaoshikari@gmail.com
author_url: http://blog.ch-wind.com
wordpress_id: 891
wordpress_url: http://blog.ch-wind.com/?p=891
date: '2014-07-05 22:16:32 +0000'
date_gmt: '2014-07-05 14:16:32 +0000'
tags: []
---
海龟交易法的大名，相信听说过趋势交易的都有所耳闻。这样一个公开的交易系统的盈利水平一定不好，甚至可能会亏损，我一直抱有这样的看法。


完整的海龟交易法可以在原海龟所发行的《原版海龟交易法则》中找到。这本书中对海龟交易法则和交易系统的构成讲解的很详细，有兴趣的童鞋可以到文章末尾下载看看。


趋势交易简单的说就是在趋势信号出现时入场，如果出错就认赔，在不断的试错中最终能够获得成功。也就是所谓的95%的收益来自5%的正确交易。海龟交易法则（系统二）的大体构成总结如下：



> 仓位：利用ATR来标识波动性，记为N，计算出头寸单位（Units）。
> 
> 
> 单位=帐户的1%/(N×每点价值量)
> 
> 
> 然后根据市场的不同来决定最大交易几个单位。
> 
> 
> 入场：价格突破55日高\低点入场，并在每0.5N的距离上加仓，直到达到事先规定的最大仓位为止。
> 
> 
> 出场：价格回调超过20日低\高点
> 
> 
> 止损：新开仓止损在离现价2N处，每次加仓所有原有订单的止损上拉0.5N
> 
> 


其他的一些细节部分，例如双重止损策略和系统一可以参考文档中的描述。相信还是海龟更能描述好这个系统。说实话，系统一的部分没有怎么看明白。书中说系统一运用55日突破做第二次加仓，那么后面提到的0.5N的等距加仓策略究竟要不要使用呢？如果要的话，在何时使用呢？故而决定采用描述较为明确的系统二。


整理出上面的规则之后，就开始着手mt4脚本的编写了。代码的实现和文档中的描述有些出入，具体包括以下：



> 1. 书中说N的统计是每周进行的，而代码实现是每时每刻都进行统计变更的。
> 
> 
> 2. N在突破单成交后是否改变书中没有明示，为了保证和书中例子的一致性，突破之后N将保持不变。
> 
> 
> 3. 由于MT4代码运行的不连续性，使用实际账户的金额进行仓位控制。
> 
> 
> 4. 代码中虽然实现了从订单中恢复出N的功能，但是长线挂EA最好不要在不稳定的环境中进行。
> 
> 


具体的代码可以在文末下载，为了避免无端的篇幅占用，就不贴出来了。


对过去的数据进行复盘测试，会发现这个系统确实盈利能力很强。这种盈利能力，估计也是为啥海龟们在金融市场中屹立不倒的原因所在。不多说直接上图，这是欧元从1970年到现在的测试结果：


[![image](https://blog.ch-wind.com/wp-content/uploads/2014/07/image_thumb1.png "image")](https://blog.ch-wind.com/wp-content/uploads/2014/07/image1.png)


[![image](https://blog.ch-wind.com/wp-content/uploads/2014/07/image_thumb2.png "image")](https://blog.ch-wind.com/wp-content/uploads/2014/07/image2.png)


40年资金增长2万多倍，正好是年复利30%左右，这就是复利原子弹的威力。不过欧元似乎没有那么长时间的历史，不知道前面那些年的数据是德国马克还是平台现编的，因此这个结果只有观赏作用。于是后来又用英镑最近10年的数据进行测试： 


[![gbp](https://blog.ch-wind.com/wp-content/uploads/2014/07/gbp.png)](https://blog.ch-wind.com/wp-content/uploads/2014/07/gbp.png)


最后的一段时间刚好在回撤中结束了，颇为遗憾。不过其收益率还是很可观的。


总体而言，单纯的海龟交易法并不适合散户使用。大规模和长时间的资金回撤并不符合传统的投资要求。而海龟们在使用此方法时，是采用多个市场之间分散投资的方法的，具体操作文档中有说明。由于海龟交易法对资金消耗很大，故而普通的投资者是不可能这么做的。


无论如何，这个经典的趋势交易法，还是能给我们很多启发的。



> 文档和代码的下载地址： 链接: http://pan.baidu.com/s/1qW2mBDU 密码: eu5e
> 
> 


